# Service Mesh 服务网格[下一代的微服务]


## 1、概念

![](../../pic/2020-01-30-12-50-49.png)


![](../../pic/2020-01-30-15-07-05.png)

Service Mesh的部署模型，先看单个的，对于一个简单请求，作为请求发起者的客户端应用实例，会首先用简单方式将请求发送到本地的Service Mesh实例。这是两个独立进程，他们之间是远程调用。

Service Mesh会完成完整的服务间调用流程，如服务发现负载均衡，最后将请求发送给目标服务。这表现为Sidecar。

![](../../pic/2020-01-30-15-07-51.png)

Sidecar这个词中文翻译为边车，或者车斗，也有一个乡土气息浓重的翻译叫做边三轮。Sidecar这个东西出现的时间挺长的，它在原有的客户端和服务端之间加多了一个代理。

![](../../pic/2020-01-30-15-09-35.png)

多个服务调用的情况，在这个图上我们可以看到Service Mesh在所有的服务的下面，这一层被称之为服务间通讯专用基础设施层。Service Mesh会接管整个网络，把所有的请求在服务之间做转发。在这种情况下，我们会看到上面的服务不再负责传递请求的具体逻辑，只负责完成业务处理。服务间通讯的环节就从应用里面剥离出来，呈现出一个抽象层。

![](../../pic/2020-01-30-15-10-19.png)

如果有大量的服务，就会表现出来网格。图中左边绿色方格是应用，右边蓝色的方框是Service Mesh，蓝色之间的线条是表示服务之间的调用关系。Sidecar之间的连接就会形成一个网络，这个就是服务网格名字的由来。这个时候代理体现出来的就和前面的sidecar不一样了，形成网状。

![](../../pic/2020-01-30-15-10-44.png)


再来回顾前面给出的定义，大家回头看这四个关键词。首先第一个，服务网格是抽象的，实际上是抽象出了一个基础设施层，在应用之外。其次，功能是实现请求的可靠传递。部署上体现为轻量级的网络代理。最后一个关键词是，对应用程序透明。

大家注意看，上面的图中，网络在这种情况下，可能不是特别明显。但是如果把左边的应用程序去掉，现在只呈现出来Service Mesh和他们之间的调用，这个时候关系就会特别清晰，就是一个完整的网络。这是Service Mesh定义当中一个非常重要的关键点，和Sidecar不相同的地方：不再将代理视为单独的组件，而是强调由这些代理连接而形成的网络。在Service Mesh里面非常强调代理连接组成的网络，而不像sidecar那样看待个体。

## 2、发展历程

1、微服务之前

![](../../pic/2020-01-30-15-12-14.png)

2、微服务时代

![](../../pic/2020-01-30-15-12-36.png)

3、网络通信技术栈下移

![](../../pic/2020-01-30-15-13-11.png)

4、sidecar出现

![](../../pic/2020-01-30-15-13-29.png)

![](../../pic/2020-01-30-15-15-00.png)

5、通用型的servicemesh

![](../../pic/2020-01-30-15-15-19.png)

![](../../pic/2020-01-30-15-16-06.png)

6、istio

![](../../pic/2020-01-30-15-16-43.png)

![](../../pic/2020-01-30-15-17-03.png)

![](../../pic/2020-01-30-15-17-21.png)


架构

![](../../pic/2020-01-30-15-17-34.png)



## 3、为何选择service mesh？

解决当前微服务架构的痛点问题

![](../../pic/2020-01-30-15-20-20.png)

![](../../pic/2020-01-30-15-20-49.png)

![](../../pic/2020-01-30-15-21-36.png)

![](../../pic/2020-01-30-15-21-49.png)

![](../../pic/2020-01-30-15-22-03.png)

![](../../pic/2020-01-30-15-22-19.png)



## 4、落地产品

### 1、istio



### 2、SOFAMesh

- [SOFAMesh介绍](./SOFAMesh.md)





# 参考

- [servicemesher社区](https://www.servicemesher.com/)

- [2017 Service Mesh：下一代微服务](https://skyao.io/talk/201710-service-mesh-next-generation-microservice/)

