
<!-- TOC -->

- [1、注册中心在微服务架构中位置](#1注册中心在微服务架构中位置)
- [2、数据结构](#2数据结构)
- [3、存储内部分层](#3存储内部分层)
- [参考](#参考)

<!-- /TOC -->


# 1、注册中心在微服务架构中位置

服务注册和发现的基本流程：

![](../../pic/2020-01-30-11-38-25.png)

服务注册中心的主要能力：

- 1、服务注册

- 2、服务订阅

# 2、数据结构

![](../../pic/2020-01-30-11-40-53.png)

SOFARegistry 的存储模型比较简单，主要基于 KV 存储两类数据，一类是订阅关系，体现为多个订阅方关心的 Topic（或服务键值）和他们的监听器列表，另一类是同一个 Topic（或服务键值）的发布者列表。基于观察者模式，在服务提供方发生变化时（比如服务提供方的节点上下线），会从订阅关系中寻找相应的订阅者，最终推送最新的服务列表给订阅者。

# 3、存储内部分层













# 参考

- [蚂蚁金服服务注册中心 SOFARegistry 解析 | 服务发现优化之路](https://www.jianshu.com/p/3f1cd79c3f70)

- [蚂蚁金服开源服务注册中心 SOFARegistry | SOFA 开源一周年献礼](https://www.jianshu.com/p/fdeea255dba4)

